"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const node_path_1 = require("node:path");
const loader = async function (source) {
    const options = this.getOptions();
    const assetMatches = source.matchAll(/@asset\((.*)\)/g);
    if (assetMatches) {
        await Promise.all([...assetMatches].map(async ([match, request]) => {
            request = request.replaceAll(`'`, ``).replaceAll(`"`, ``);
            this.addDependency((0, node_path_1.join)(this.context, request));
            const signifier = await this.importModule(request, {
                publicPath: options?.publicPath ?? ``,
            });
            source.replace(match, signifier);
        }));
    }
    return source;
};
exports.default = loader;
//# sourceMappingURL=asset-loader.cjs.map